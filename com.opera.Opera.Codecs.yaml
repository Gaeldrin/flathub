id: com.opera.Opera.Codecs
  #branch: 'nwjs-ffmpeg-0.86.0'
runtime: com.opera.Opera
sdk: org.freedesktop.Sdk//23.08
build-extension: true
separate-locales: false

modules:
  - name: codecs
    buildsystem: simple
    build-commands:
      - unzip ffmpeg.zip
      - install -Dm 644 libffmpeg.so -t ${FLATPAK_DEST}
    sources:
      - type: file
        url: https://github.com/Ld-Hagen/nwjs-ffmpeg-prebuilt/releases/download/nwjs-ffmpeg-0.86.0/0.86.0-linux-x64.zip
        sha256: 5a1cdf7d45f580f6a30b677e8a402453cba4856bcadd5f946550857d1c04497c
        dest-filename: ffmpeg.zip
        x-checker-data:
          type: rotating-url
          url: https://github.com/Ld-Hagen/nwjs-ffmpeg-prebuilt/releases/download/nwjs-ffmpeg-/-linux-x64.zip
          pattern: https://github.com/Ld-Hagen/nwjs-ffmpeg-prebuilt/releases/download/nwjs-ffmpeg-${version}/${version}-linux-x64.zip
#      - type: git
#        url: https://github.com/Ld-Hagen/nwjs-ffmpeg-prebuilt
#        tag: 'nwjs-ffmpeg-0.86.0'
#        commit: 32a332b7f6e6a0a8190c66315732914b1796abb1
#        x-checker-data:
#          type: git
#          tag-pattern: ^nwjs-ffmpeg-([\d.]+)$

